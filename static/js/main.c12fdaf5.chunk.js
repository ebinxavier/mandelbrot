(this.webpackJsonpmandelbrot=this.webpackJsonpmandelbrot||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},38:function(e,t){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(19),i=n.n(a),o=(n(27),n(2)),u=(n(28),n(20)),s=function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}},l=n.n(u)()(["#ff5f18","#e98d10","#dae046","#617bb3","#555ddd"]).rgb(256).map((function(e){return e.toRgbString()})),f=function(e){var t=Math.floor(e);return t<=0?"rgba(0,0,0)":l[t]},b=n(3),j=n.n(b),d=n(8),O=n(44),p=function(e,t){for(var n=0,c=0;Object(O.a)(n)<=2&&c<t;)n=Object(O.b)(Object(O.d)(n,2),e),c+=1;return c},v=function(){var e=Object(d.a)(j.a.mark((function e(t,n,c){var r,a,i,o,u,s,l,f,b,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.RE_START,a=t.RE_END,i=t.IM_START,o=t.IM_END,u=[],s=performance.now(),l=0;l<c;l++)for(f=0;f<c;f++)b=Object(O.c)(i+f/c*(o-i),r+l/c*(a-r)),d=p(b,n),u.push({y:l,x:f,intensity:(n-d)/n*255});return e.abrupt("return",{image2D:u,delta:((performance.now()-s)/1e3).toFixed(2)});case 5:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),x=n(21),g=n(22),h=n(4),S=300;var R=function(){var e=Object(c.useRef)(null),t=Object(c.useState)([]),n=Object(o.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!0),u=Object(o.a)(i,2),l=u[0],b=u[1],O=Object(c.useState)({RE_START:-1.5,RE_END:1.5,IM_START:-2.2,IM_END:.8}),p=Object(o.a)(O,2),R=p[0],m=p[1],E=Object(c.useState)(),T=Object(o.a)(E,2),y=T[0],_=T[1],w=Object(c.useState)(),M=Object(o.a)(w,2),A=M[0],I=M[1],D=Object(c.useState)(!1),N=Object(o.a)(D,2),k=N[0],C=(N[1],Object(c.useState)(30)),F=Object(o.a)(C,2),L=F[0],z=F[1],B=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){!function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("fractal.wasm");case 3:return t=e.sent,e.next=6,g.a.instantiate(t,{index:{consoleLog:function(e){console.log(e)}}});case 6:n=e.sent,r(n.exports),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()()}),[]),n}(),J=function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.fillStyle="rgba(255,255,255,255)",e.clearRect(0,0,e.canvas.width,e.canvas.height),t.forEach((function(t){e.fillStyle=f(t.intensity),e.fillRect(t.x,t.y,1,1)})),e.fill()}(e,r),y&&function(e,t,n){var c=t.x,r=t.y;e.strokeStyle="#000000",e.strokeRect(c-n/8,r-n/8,n/4,n/4),e.fill()}(e,y,S)},P=Object(c.useCallback)(Object(x.debounce)((function(t){var n=s(e.current,t),c=n.x,r=n.y;setTimeout((function(){_({x:c,y:r})}))}),10),[]);return Object(c.useEffect)((function(){var t=e.current.getContext("2d");return J(t),function(){window.cancelAnimationFrame(undefined)}}),[y,r]),Object(c.useEffect)((function(){if(R){if(b(!0),k&&B){var e=performance.now(),t=(null===B||void 0===B?void 0:B.getImage(R.RE_START,R.RE_END,R.IM_START,R.IM_END,L,S)).map((function(e){var t=e.split(","),n=Object(o.a)(t,3),c=n[0],r=n[1],a=n[2];return{x:Number(c),y:Number(r),intensity:Number(a)}}));a(t),b(!1),I(((performance.now()-e)/1e3).toFixed(2)),console.log("Using WASM"),z(L+5)}k||setTimeout((function(){v(R,L,S).then((function(e){var t=e.image2D,n=e.delta;a(t),b(!1),I(n),console.log("Using JS")})),z(L+5)}))}}),[R,B]),Object(h.jsxs)("div",{style:{padding:"0 20px",textAlign:"center"},children:[Object(h.jsx)("h1",{children:"Mandelbrot Fractal "}),Object(h.jsx)("p",{children:"Select area to zoom in"}),Object(h.jsx)("br",{}),Object(h.jsx)("div",{style:{padding:10,border:"1px solid #555555",display:"inline-block"},children:Object(h.jsx)("canvas",{onMouseMove:P,onClick:function(t){var n=s(e.current,t),c=n.x,r=n.y,a=R.RE_START,i=R.IM_START,o=R.IM_END,u=(c-37.5)/S,l=(r-37.5)/S,f=o-i;u*=f,l*=f;var b=f/4;m({RE_START:l+=a,RE_END:l+b,IM_START:u+=i,IM_END:u+b})},ref:e,width:S,height:S})}),Object(h.jsxs)("div",{children:[l?Object(h.jsx)("span",{style:{fontSize:15},children:"Rendering..."}):A&&Object(h.jsxs)("span",{style:{fontSize:15},children:["Last render time: ",A," Sec"]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){return window.location.reload()},children:"RESET"})]})]})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(R,{})}),document.getElementById("root")),m()}},[[41,1,2]]]);
//# sourceMappingURL=main.c12fdaf5.chunk.js.map